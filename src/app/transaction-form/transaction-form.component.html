<div class="text-center">
  <button [ngClass]="{'btn': true, 'btn-danger': tType === 'i', 'btn-primary': tType !== 'i'}" (click)="onChangeCategoryType('i')">Income</button>
  <button [ngClass]="{'btn': true, 'btn-danger': tType === 'e',  'btn-primary': tType !== 'e'}" (click)="onChangeCategoryType('e')">Expense</button>
</div>
<br/>

<button 
    *ngIf = "!selectedTransaction" 
    (click)="addTransactionForm()" 
    [disabled] = "transactionForm.get('transactionFormArray').invalid">
        Add Form
</button>


<form [formGroup] = "transactionForm" 
  (ngSubmit)="onSubmit(selectedTransaction)">
  <div formArrayName="transactionFormArray" 
       *ngFor="let transaction of transactionForm.get('transactionFormArray').controls; let i = index">
    <hr>  
    <div [formGroupName]="i">
        <input 
          *ngIf = "selectedTransaction" 
          disabled [id] = "id+i" 
          type="number" 
          formControlName="id" placeholder="id"
        />
        &nbsp;
        <input type="text"
          [id] = "'tranDate'+i"
          formControlName="tranDate"
          placeholder="date"
          bsDatepicker
          [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY', containerClass:'theme-dark-blue' }"
        />
        &nbsp;
        <select formControlName="category" [id] = "'category'+i">
          <ng-container *ngFor="let category of categories; index as i">
            <option [ngValue]=category.cid>{{category.cname}}</option>
          </ng-container>
        </select>
        &nbsp;      
        <input [id] = "amt+i" type="number" formControlName="amt" placeholder="amt"/>
        &nbsp;
        <input [id] = "'tranDesc'+i" type="text" formControlName="tranDesc" placeholder="desc"/>
        &nbsp;
        <input [id] = "'keyWords'+i" type="text" formControlName="keyWords" placeholder="key words"/>
        &nbsp;
        <input [id] = "'futureTransaction'+i" 
          formControlName="futureTransaction" 
          type="checkbox" 
          name="futureTransaction"
        />
        <label [for]= "'futureTransaction'+i">Future transaction</label>
        <button type="button" *ngIf="transactionForm.get('transactionFormArray').controls.length > 1" (click)="removeForm(i)">Remove</button>
      </div>
  </div>
  
  <br/>

  <button 
    [disabled] = "transactionForm.get('transactionFormArray').invalid" 
    value="submit">
      submit
  </button>
  &nbsp;
  <button *ngIf="selectedTransaction" type="button" (click) = "onDeleteTransaction(template)">
    Delete
  </button>
</form>

<ng-template #template>
  <div class="modal-body text-center">
    <p>Do you want to confirm?</p>
    <button type="button" class="btn btn-default" (click)="confirmDelete()" >Yes</button>
    &nbsp;
    <button type="button" class="btn btn-primary" (click)="deleteDecline()" >No</button>
  </div>
</ng-template>
